## How to run

Assign value to `POSTGRES_PASSWORD` variable in `.env` file. Then:

```bash
cd be-python-flask
docker compose up --build
```

This will start db and app services.

Needed config parameters are predefined in `.env`.

## How to create dev setup

### WIN 10 + VS Code

Have installed poetry with `virtualenvs.in-project` set to `true`. Then:

```bash
cd be-python-flask
poetry install
.venv/Scripts/activate
```

Activation of enviroment can be automated when project folder is entered in terminal. See this SO question - [link](https://stackoverflow.com/questions/45216663/how-to-automatically-activate-virtualenvs-when-cding-into-a-directory).

## Tests

### Manual testing via http file

Start app with db service and use http file `tests/manual_test.http`.

Tested in VS Code + REST Client extension. Http file may require some editing when used in different IDE/editor. More info in this tutorial article [link](https://kenslearningcurve.com/tutorials/test-an-api-with-http-files-in-vscode/)

### App logic unit tests

Sample tests are at `tests/unit/`. Run them via:

```bash
cd be-python-flask
python -m unittest tests/unit/test_app_logic.py -v
```

It tests only dummy logic separated from API endpoint code.

### Integration / contract tests

Sample integration behave test is at `tests/features/`. Run it via:

```bash
cd be-python-flask
python -m behave tests/features/
```

Tests how whole app + db service responds to API calls. No clean up code is implemented.

## Further improvements / discussions

### Secrets

DB secrets are stored in `.env` file and then used as environment variables. This may lead to their exposure. More about better secrets handling - [docker docs](https://docs.docker.com/compose/use-secrets/)

### Logging

It would be nice to have logger, but there is not much happening in this toy project so it is purposely omitted. Standard Python `logging` can be used - [flask docs link](https://flask.palletsprojects.com/en/3.0.x/logging/)

### Used data model

Date of meeting is naively implemented as string.

### Input data validation

Parameter binding preventing possible SQL injection is used. But there is no input data validation.

### Documented API

OpenAPI documentation can be autogenerated via multiple tools for example as JSON file viewable in web interface. [flask-rest-api OpenAPI](https://flask-rest-api.readthedocs.io/en/stable/openapi.html) may be used for this.

### Most of the code in `app.py`

This project is small, but what if it will grow larger? It is good practice to separate flask app setup code, models and routes to separate files. Few basic tips are stated here - [flask docs link](https://flask.palletsprojects.com/en/3.0.x/patterns/packages/)

### SQLAlchemy and MyPy

Used implementation of ORM mapping is naive. More info about support for ORM mappings are available here - [sqlalchemy docs](https://docs.sqlalchemy.org/en/20/orm/extensions/mypy.html#mypy-pep-484-support-for-orm-mappings)

### Production server and deploy

Development server is ok for local sandboxing. What needs to be done before production deploy? Overivew of currently available options here - [flask docs link](https://flask.palletsprojects.com/en/3.0.x/deploying/)

### ORM - yes or now?

Yes if it boosts productivity and decoupling. Are you writing you own ORM when you think that you are not using any ORM? ((:

### Test strategies

Used strategy for unit / integ (contract) tests. What are other options? Tests against mocks / stubs vs in memory db vs separate db instance? When and why?
